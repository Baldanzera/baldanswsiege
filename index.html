<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SW Siege Counter</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; background-color: #f5f5f5; }
        .search-box, .results, .add-counter-form { background: #fff; padding: 20px; border-radius: 8px; margin-bottom: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .mob-input { display: flex; gap: 10px; margin-bottom: 10px; }
        input { padding: 8px; border: 1px solid #ddd; border-radius: 4px; flex: 1; }
        button { padding: 8px 16px; background: #4CAF50; color: white; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #45a049; }
        .vote-up { background: #4CAF50; }
        .vote-down { background: #f44336; }
        .hidden { display: none; }
        .add-counter-btn { margin-top: 10px; background: #2196F3; }
        .dropdown-mobs {
  position: absolute;
  background: white;
  border: 1px solid #ddd;
  width: 100%;
  max-height: 200px;
  overflow-y: auto;
  z-index: 1000;
}

.dropdown-mobs div {
  padding: 8px;
  cursor: pointer;
}

.dropdown-mobs div:hover {
  background-color: #f5f5f5;
}

.dropdown-mobs strong {
  color: #4CAF50;
}

.dropdown-mobs .awakened {
  color: #666;
  font-size: 0.9em;
}
    </style>
</head>
<body>
    <h1>SW Siege Counter</h1>
    <div class="search-box">
        <h2>Buscar Defesa</h2>
        <div class="mob-input">
            <input type="text" id="mob1" placeholder="Mob 1" autocomplete="off">
            <input type="text" id="mob2" placeholder="Mob 2 (opcional)" autocomplete="off">
            <input type="text" id="mob3" placeholder="Mob 3 (opcional)" autocomplete="off">
        </div>
        <button id="search-btn">Buscar Counters</button>
    </div>
    <div class="results" id="results"></div>
    <button id="show-add-form" class="add-counter-btn hidden">Adicionar Novo Counter</button>
    <div class="add-counter-form hidden" id="add-counter-form">
        <h2>Adicionar Counter</h2>
        <div class="mob-input">
            <input type="text" id="atk-mob1" placeholder="Seu Mob 1" autocomplete="off">
            <input type="text" id="atk-mob2" placeholder="Seu Mob 2" autocomplete="off">
            <input type="text" id="atk-mob3" placeholder="Seu Mob 3" autocomplete="off">
        </div>
        <input type="text" id="notes" placeholder="Observações (opcional)">
        <button id="save-counter-btn">Salvar Counter</button>
    </div>

    <script>
        <script>
  const API_URL = "https://script.google.com/macros/s/AKfycbzMW6D622O0zuHaGmBlnk8u8YbxdQ8ut0PcjzbT5AoQ0fWnhXzQklf7lLZO7ItRQlkG/exec";
  let mobsList = [];

  async function carregarMobs() {
    try {
      const response = await fetch(`${API_URL}?action=getMobs`);
      mobsList = await response.json();
    } catch (error) {
      console.error("Erro ao carregar mobs:", error);
    }
  }

  function filtrarMobs(input) {
    if (input.length < 3 || !mobsList.length) return [];
    const lowerInput = input.toLowerCase();
    return mobsList.filter(mob => {
      return (
        mob.base.toLowerCase().includes(lowerInput) || 
        mob.awakened.toLowerCase().includes(lowerInput)
      );
    }).sort((a, b) => {
      const aStartsWith = a.base.toLowerCase().startsWith(lowerInput) || 
                         a.awakened.toLowerCase().startsWith(lowerInput);
      const bStartsWith = b.base.toLowerCase().startsWith(lowerInput) || 
                         b.awakened.toLowerCase().startsWith(lowerInput);
      return aStartsWith && !bStartsWith ? -1 : bStartsWith ? 1 : 0;
    });
  }

  function mostrarSugestoes(inputElement) {
    const input = inputElement.value;
    const sugestoes = filtrarMobs(input);
    const dropdownId = `${inputElement.id}-dropdown`;
    let dropdown = document.getElementById(dropdownId);

    if (dropdown) dropdown.remove();
    if (sugestoes.length === 0) return;

    dropdown = document.createElement('div');
    dropdown.id = dropdownId;
    dropdown.className = 'dropdown-mobs';
    
    sugestoes.forEach(mob => {
      const item = document.createElement('div');
      item.innerHTML = `<strong>${mob.base}</strong> <span class="awakened">(${mob.awakened})</span>`;
      item.onclick = () => {
        inputElement.value = mob.base;
        dropdown.remove();
      };
      dropdown.appendChild(item);
    });

    inputElement.parentNode.appendChild(dropdown);
  }

  document.addEventListener('DOMContentLoaded', carregarMobs);
  document.querySelectorAll('#mob1, #mob2, #mob3').forEach(input => {
    input.addEventListener('input', () => mostrarSugestoes(input));
    input.addEventListener('blur', () => {
      setTimeout(() => {
        const dropdown = document.getElementById(`${input.id}-dropdown`);
        if (dropdown) dropdown.remove();
      }, 200);
    });
  });

  // Seu código original (buscarCounters, adicionarCounter, etc.)
  document.getElementById('search-btn').addEventListener('click', buscarCounters);
  document.getElementById('show-add-form').addEventListener('click', () => {
    document.getElementById('add-counter-form').classList.remove('hidden');
  });
  document.getElementById('save-counter-btn').addEventListener('click', adicionarCounter);

  async function buscarCounters() {
    // ... (mantenha o restante desta função igual)
  }

  async function adicionarCounter() {
    // ... (mantenha o restante desta função igual)
  }
</script>
    </script>
</body>
</html>
